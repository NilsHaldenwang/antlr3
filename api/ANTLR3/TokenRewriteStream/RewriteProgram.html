<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: ANTLR3::TokenRewriteStream::RewriteProgram</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../index.html">Index (R)</a> &raquo; 
    <span class='title'><a href="../../ANTLR3.html" title="ANTLR3 (module)">ANTLR3</a></span> &raquo; <span class='title'><a href="../TokenRewriteStream.html" title="ANTLR3::TokenRewriteStream (class)">TokenRewriteStream</a></span>
     &raquo; 
    <span class="title">RewriteProgram</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ANTLR3::TokenRewriteStream::RewriteProgram 
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ANTLR3::TokenRewriteStream::RewriteProgram</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/antlr3/streams/rewrite.rb</dd>
  
</dl>
<div class="clear"></div>




  
    <h2>Instance Method Summary</h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#cast_range-instance_method" title="#cast_range (instance method)">- (Object) <strong>cast_range</strong>(args, extra = 0) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#check_arguments-instance_method" title="#check_arguments (instance method)">- (Object) <strong>check_arguments</strong>(args, min, max) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear-instance_method" title="#clear (instance method)">- (Object) <strong>clear</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#conflict%21-instance_method" title="#conflict! (instance method)">- (Object) <strong>conflict!</strong>(current, previous) </a>
    

    
  </span>
  
  
  <span class="note title private">private</span>
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">- (Object) <strong>delete</strong>(*range_arguments) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">- (Object) <strong>execute</strong>(*range_arguments) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (RewriteProgram) <strong>initialize</strong>(stream, name = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of RewriteProgram.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#insert_after-instance_method" title="#insert_after (instance method)">- (Object) <strong>insert_after</strong>(index, text) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#insert_before-instance_method" title="#insert_before (instance method)">- (Object) <strong>insert_before</strong>(index, text) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reduce-instance_method" title="#reduce (instance method)">- (Object) <strong>reduce</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#replace-instance_method" title="#replace (instance method)">- (Object) <strong>replace</strong>(*range_arguments) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#undo-instance_method" title="#undo (instance method)">- (Object) <strong>undo</strong>(number_of_operations = 1) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><a href="" title="ANTLR3::TokenRewriteStream::RewriteProgram (class)">RewriteProgram</a></tt>) <strong>initialize</strong>(stream, name = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of RewriteProgram
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 162</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span> <span class='stream identifier id'>stream</span><span class='comma token'>,</span> <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span> <span class='rparen token'>)</span>
  <span class='@stream ivar id'>@stream</span> <span class='assign token'>=</span> <span class='stream identifier id'>stream</span>
  <span class='@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span>
  <span class='@operations ivar id'>@operations</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="cast_range-instance_method">
  
    - (<tt>Object</tt>) <strong>cast_range</strong>(args, extra = 0)  <span class="extras">(private)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 307</span>

<span class='def def kw'>def</span> <span class='cast_range identifier id'>cast_range</span><span class='lparen token'>(</span> <span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='extra identifier id'>extra</span> <span class='assign token'>=</span> <span class='integer val'>0</span> <span class='rparen token'>)</span>
  <span class='single identifier id'>single</span><span class='comma token'>,</span> <span class='pair identifier id'>pair</span> <span class='assign token'>=</span> <span class='extra identifier id'>extra</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='extra identifier id'>extra</span> <span class='plus op'>+</span> <span class='integer val'>2</span>
  <span class='case case kw'>case</span> <span class='check_arguments identifier id'>check_arguments</span><span class='lparen token'>(</span> <span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='single identifier id'>single</span><span class='comma token'>,</span> <span class='pair identifier id'>pair</span> <span class='rparen token'>)</span>
  <span class='when when kw'>when</span> <span class='single identifier id'>single</span>
    <span class='loc identifier id'>loc</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span>
    
    <span class='if if kw'>if</span> <span class='loc identifier id'>loc</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span> <span class='Range constant id'>Range</span> <span class='rparen token'>)</span>
      <span class='first identifier id'>first</span><span class='comma token'>,</span> <span class='last identifier id'>last</span> <span class='assign token'>=</span> <span class='loc identifier id'>loc</span><span class='dot token'>.</span><span class='first identifier id'>first</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span><span class='comma token'>,</span> <span class='loc identifier id'>loc</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
      <span class='loc identifier id'>loc</span><span class='dot token'>.</span><span class='exlude_end? fid id'>exlude_end?</span> <span class='and and kw'>and</span> <span class='last identifier id'>last</span> <span class='opasgn op'>-=</span> <span class='integer val'>1</span>
      <span class='return return kw'>return</span> <span class='cast_range identifier id'>cast_range</span><span class='lparen token'>(</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='unshift identifier id'>unshift</span><span class='lparen token'>(</span> <span class='first identifier id'>first</span><span class='comma token'>,</span> <span class='last identifier id'>last</span> <span class='rparen token'>)</span><span class='comma token'>,</span> <span class='extra identifier id'>extra</span> <span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='loc identifier id'>loc</span> <span class='assign token'>=</span> <span class='loc identifier id'>loc</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
      <span class='return return kw'>return</span> <span class='cast_range identifier id'>cast_range</span><span class='lparen token'>(</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='unshift identifier id'>unshift</span><span class='lparen token'>(</span> <span class='loc identifier id'>loc</span><span class='comma token'>,</span> <span class='loc identifier id'>loc</span> <span class='rparen token'>)</span><span class='comma token'>,</span> <span class='extra identifier id'>extra</span> <span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='when when kw'>when</span> <span class='pair identifier id'>pair</span>
    <span class='first identifier id'>first</span><span class='comma token'>,</span> <span class='last identifier id'>last</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span><span class='lparen token'>(</span> <span class='integer val'>2</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='map! fid id'>map!</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='arg identifier id'>arg</span><span class='bitor op'>|</span> <span class='arg identifier id'>arg</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span> <span class='rbrace token'>}</span>
    <span class='if if kw'>if</span> <span class='first identifier id'>first</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span> <span class='and and kw'>and</span> <span class='last identifier id'>last</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span>
      <span class='first identifier id'>first</span> <span class='opasgn op'>+=</span> <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='last identifier id'>last</span> <span class='opasgn op'>+=</span> <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
    <span class='else else kw'>else</span>
      <span class='last identifier id'>last</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span> <span class='and and kw'>and</span> <span class='last identifier id'>last</span> <span class='opasgn op'>+=</span> <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
      <span class='first identifier id'>first</span> <span class='assign token'>=</span> <span class='first identifier id'>first</span><span class='dot token'>.</span><span class='at_least identifier id'>at_least</span><span class='lparen token'>(</span> <span class='integer val'>0</span> <span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
    <span class='return return kw'>return</span><span class='lparen token'>(</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='unshift identifier id'>unshift</span><span class='lparen token'>(</span> <span class='first identifier id'>first</span> <span class='dot2 op'>..</span> <span class='last identifier id'>last</span> <span class='rparen token'>)</span> <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_arguments-instance_method">
  
    - (<tt>Object</tt>) <strong>check_arguments</strong>(args, min, max)  <span class="extras">(private)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


334
335
336
337
338
339
340
341
342
343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 334</span>

<span class='def def kw'>def</span> <span class='check_arguments identifier id'>check_arguments</span><span class='lparen token'>(</span> <span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='min identifier id'>min</span><span class='comma token'>,</span> <span class='max identifier id'>max</span> <span class='rparen token'>)</span>
  <span class='n identifier id'>n</span> <span class='assign token'>=</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
  <span class='if if kw'>if</span> <span class='n identifier id'>n</span> <span class='lt op'>&lt;</span> <span class='min identifier id'>min</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span>
      <span class='dstring node'>&quot;wrong number of arguments (#{ args.length } for #{ min })&quot;</span><span class='comma token'>,</span>
      <span class='caller identifier id'>caller</span>
  <span class='elsif elsif kw'>elsif</span> <span class='n identifier id'>n</span> <span class='gt op'>&gt;</span> <span class='max identifier id'>max</span>
    <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span>
      <span class='dstring node'>&quot;wrong number of arguments (#{ args.length } for #{ max })&quot;</span><span class='comma token'>,</span>
      <span class='caller identifier id'>caller</span>
  <span class='else else kw'>else</span> <span class='return return kw'>return</span> <span class='n identifier id'>n</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clear-instance_method">
  
    - (<tt>Object</tt>) <strong>clear</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 294</span>

<span class='def def kw'>def</span> <span class='clear identifier id'>clear</span>
  <span class='@operations ivar id'>@operations</span><span class='dot token'>.</span><span class='clear identifier id'>clear</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="conflict!-instance_method">
  
    - (<tt>Object</tt>) <strong>conflict!</strong>(current, previous)  <span class="extras">(private)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 302</span>

<span class='def def kw'>def</span> <span class='conflict! fid id'>conflict!</span><span class='lparen token'>(</span> <span class='current identifier id'>current</span><span class='comma token'>,</span> <span class='previous identifier id'>previous</span> <span class='rparen token'>)</span>
  <span class='message identifier id'>message</span> <span class='assign token'>=</span> <span class='string val'>'operation %p overlaps with previous operation %p'</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span> <span class='current identifier id'>current</span><span class='comma token'>,</span> <span class='previous identifier id'>previous</span> <span class='rbrack token'>]</span>
  <span class='raise identifier id'>raise</span><span class='lparen token'>(</span> <span class='RangeError constant id'>RangeError</span><span class='comma token'>,</span> <span class='message identifier id'>message</span><span class='comma token'>,</span> <span class='caller identifier id'>caller</span> <span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete-instance_method">
  
    - (<tt>Object</tt>) <strong>delete</strong>(*range_arguments) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194
195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 192</span>

<span class='def def kw'>def</span> <span class='delete identifier id'>delete</span><span class='lparen token'>(</span> <span class='mult op'>*</span><span class='range_arguments identifier id'>range_arguments</span> <span class='rparen token'>)</span>
  <span class='range identifier id'>range</span><span class='comma token'>,</span> <span class='assign token'>=</span> <span class='cast_range identifier id'>cast_range</span><span class='lparen token'>(</span> <span class='range_arguments identifier id'>range_arguments</span> <span class='rparen token'>)</span>
  <span class='op identifier id'>op</span> <span class='assign token'>=</span> <span class='Delete constant id'>Delete</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='@stream ivar id'>@stream</span><span class='comma token'>,</span> <span class='range identifier id'>range</span> <span class='rparen token'>)</span>
  <span class='@operations ivar id'>@operations</span> <span class='lshft op'>&lt;&lt;</span> <span class='op identifier id'>op</span>
  <span class='return return kw'>return</span> <span class='op identifier id'>op</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="execute-instance_method">
  
    - (<tt>Object</tt>) <strong>execute</strong>(*range_arguments) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 262</span>

<span class='def def kw'>def</span> <span class='execute identifier id'>execute</span><span class='lparen token'>(</span> <span class='mult op'>*</span><span class='range_arguments identifier id'>range_arguments</span> <span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='range_arguments identifier id'>range_arguments</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='range identifier id'>range</span> <span class='assign token'>=</span> <span class='integer val'>0</span> <span class='dot3 op'>...</span> <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
  <span class='else else kw'>else</span>
    <span class='range identifier id'>range</span><span class='comma token'>,</span> <span class='assign token'>=</span> <span class='cast_range identifier id'>cast_range</span><span class='lparen token'>(</span> <span class='range_arguments identifier id'>range_arguments</span> <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='output identifier id'>output</span> <span class='assign token'>=</span> <span class='string val'>''</span>
  
  <span class='tokens identifier id'>tokens</span> <span class='assign token'>=</span> <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='tokens identifier id'>tokens</span>
  
  <span class='operations identifier id'>operations</span> <span class='assign token'>=</span> <span class='reduce identifier id'>reduce</span>
  
  <span class='cursor identifier id'>cursor</span> <span class='assign token'>=</span> <span class='range identifier id'>range</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
  <span class='while while kw'>while</span> <span class='range identifier id'>range</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span> <span class='cursor identifier id'>cursor</span> <span class='rparen token'>)</span>
    <span class='if if kw'>if</span> <span class='operation identifier id'>operation</span> <span class='assign token'>=</span> <span class='operations identifier id'>operations</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span> <span class='cursor identifier id'>cursor</span> <span class='rparen token'>)</span>
      <span class='cursor identifier id'>cursor</span> <span class='assign token'>=</span> <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='execute identifier id'>execute</span><span class='lparen token'>(</span> <span class='output identifier id'>output</span> <span class='rparen token'>)</span>
    <span class='else else kw'>else</span>
      <span class='token identifier id'>token</span> <span class='assign token'>=</span> <span class='tokens identifier id'>tokens</span><span class='lbrack token'>[</span> <span class='cursor identifier id'>cursor</span> <span class='rbrack token'>]</span>
      <span class='output identifier id'>output</span> <span class='lshft op'>&lt;&lt;</span> <span class='token identifier id'>token</span><span class='dot token'>.</span><span class='text identifier id'>text</span> <span class='if if_mod kw'>if</span> <span class='token identifier id'>token</span>
      <span class='cursor identifier id'>cursor</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='if if kw'>if</span> <span class='operation identifier id'>operation</span> <span class='assign token'>=</span> <span class='operations identifier id'>operations</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span> <span class='cursor identifier id'>cursor</span> <span class='rparen token'>)</span> <span class='and and kw'>and</span>
     <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span> <span class='InsertBefore constant id'>InsertBefore</span> <span class='rparen token'>)</span>
    <span class='comment val'># catch edge 'insert-after' operations</span>
    <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='execute identifier id'>execute</span><span class='lparen token'>(</span> <span class='output identifier id'>output</span> <span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='return return kw'>return</span> <span class='output identifier id'>output</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="insert_after-instance_method">
  
    - (<tt>Object</tt>) <strong>insert_after</strong>(index, text) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 184</span>

<span class='def def kw'>def</span> <span class='insert_after identifier id'>insert_after</span><span class='lparen token'>(</span> <span class='index identifier id'>index</span><span class='comma token'>,</span> <span class='text identifier id'>text</span> <span class='rparen token'>)</span>
  <span class='index identifier id'>index</span> <span class='assign token'>=</span> <span class='index identifier id'>index</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='index identifier id'>index</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span> <span class='and and kw'>and</span> <span class='index identifier id'>index</span> <span class='opasgn op'>+=</span> <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
  <span class='op identifier id'>op</span> <span class='assign token'>=</span> <span class='InsertBefore constant id'>InsertBefore</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='@stream ivar id'>@stream</span><span class='comma token'>,</span> <span class='index identifier id'>index</span> <span class='plus op'>+</span> <span class='integer val'>1</span><span class='comma token'>,</span> <span class='text identifier id'>text</span> <span class='rparen token'>)</span>
  <span class='@operations ivar id'>@operations</span> <span class='lshft op'>&lt;&lt;</span> <span class='op identifier id'>op</span>
  <span class='return return kw'>return</span> <span class='op identifier id'>op</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="insert_before-instance_method">
  
    - (<tt>Object</tt>) <strong>insert_before</strong>(index, text) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 176</span>

<span class='def def kw'>def</span> <span class='insert_before identifier id'>insert_before</span><span class='lparen token'>(</span> <span class='index identifier id'>index</span><span class='comma token'>,</span> <span class='text identifier id'>text</span> <span class='rparen token'>)</span>
  <span class='index identifier id'>index</span> <span class='assign token'>=</span> <span class='index identifier id'>index</span><span class='dot token'>.</span><span class='to_i identifier id'>to_i</span>
  <span class='index identifier id'>index</span> <span class='lt op'>&lt;</span> <span class='integer val'>0</span> <span class='and and kw'>and</span> <span class='index identifier id'>index</span> <span class='opasgn op'>+=</span> <span class='@stream ivar id'>@stream</span><span class='dot token'>.</span><span class='length identifier id'>length</span>
  <span class='op identifier id'>op</span> <span class='assign token'>=</span> <span class='InsertBefore constant id'>InsertBefore</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='@stream ivar id'>@stream</span><span class='comma token'>,</span> <span class='index identifier id'>index</span><span class='comma token'>,</span> <span class='text identifier id'>text</span> <span class='rparen token'>)</span>
  <span class='@operations ivar id'>@operations</span> <span class='lshft op'>&lt;&lt;</span> <span class='op identifier id'>op</span>
  <span class='return return kw'>return</span> <span class='op identifier id'>op</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reduce-instance_method">
  
    - (<tt>Object</tt>) <strong>reduce</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 199</span>

<span class='def def kw'>def</span> <span class='reduce identifier id'>reduce</span>
  <span class='operations identifier id'>operations</span> <span class='assign token'>=</span> <span class='@operations ivar id'>@operations</span><span class='dot token'>.</span><span class='reverse identifier id'>reverse</span>
  <span class='reduced identifier id'>reduced</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  
  <span class='until until kw'>until</span> <span class='operations identifier id'>operations</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
    <span class='operation identifier id'>operation</span> <span class='assign token'>=</span> <span class='operations identifier id'>operations</span><span class='dot token'>.</span><span class='shift identifier id'>shift</span>
    <span class='location identifier id'>location</span> <span class='assign token'>=</span> <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='location identifier id'>location</span>
    
    <span class='case case kw'>case</span> <span class='operation identifier id'>operation</span>
    <span class='when when kw'>when</span> <span class='Replace constant id'>Replace</span>
      <span class='operations identifier id'>operations</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prior_operation identifier id'>prior_operation</span><span class='bitor op'>|</span>
        <span class='prior_location identifier id'>prior_location</span> <span class='assign token'>=</span> <span class='prior_operation identifier id'>prior_operation</span><span class='dot token'>.</span><span class='location identifier id'>location</span>
        
        <span class='case case kw'>case</span> <span class='prior_operation identifier id'>prior_operation</span>
        <span class='when when kw'>when</span> <span class='InsertBefore constant id'>InsertBefore</span>
          <span class='location identifier id'>location</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span> <span class='prior_location identifier id'>prior_location</span> <span class='rparen token'>)</span>
        <span class='when when kw'>when</span> <span class='Replace constant id'>Replace</span>
          <span class='if if kw'>if</span> <span class='location identifier id'>location</span><span class='dot token'>.</span><span class='covers? fid id'>covers?</span><span class='lparen token'>(</span> <span class='prior_location identifier id'>prior_location</span> <span class='rparen token'>)</span>
            <span class='true true kw'>true</span>
          <span class='elsif elsif kw'>elsif</span> <span class='location identifier id'>location</span><span class='dot token'>.</span><span class='overlaps? fid id'>overlaps?</span><span class='lparen token'>(</span> <span class='prior_location identifier id'>prior_location</span> <span class='rparen token'>)</span>
            <span class='conflict! fid id'>conflict!</span><span class='lparen token'>(</span> <span class='operation identifier id'>operation</span><span class='comma token'>,</span> <span class='prior_operation identifier id'>prior_operation</span> <span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='when when kw'>when</span> <span class='InsertBefore constant id'>InsertBefore</span>
      <span class='operations identifier id'>operations</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='prior_operation identifier id'>prior_operation</span><span class='bitor op'>|</span>
        <span class='prior_location identifier id'>prior_location</span> <span class='assign token'>=</span> <span class='prior_operation identifier id'>prior_operation</span><span class='dot token'>.</span><span class='location identifier id'>location</span>
        
        <span class='case case kw'>case</span> <span class='prior_operation identifier id'>prior_operation</span>
        <span class='when when kw'>when</span> <span class='InsertBefore constant id'>InsertBefore</span>
          <span class='if if kw'>if</span> <span class='prior_location identifier id'>prior_location</span> <span class='eq op'>==</span> <span class='location identifier id'>location</span>
            <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='text identifier id'>text</span> <span class='opasgn op'>+=</span> <span class='prior_operation identifier id'>prior_operation</span><span class='dot token'>.</span><span class='text identifier id'>text</span>
            <span class='true true kw'>true</span>
          <span class='end end kw'>end</span>
        <span class='when when kw'>when</span> <span class='Replace constant id'>Replace</span>
          <span class='if if kw'>if</span> <span class='location identifier id'>location</span> <span class='eq op'>==</span> <span class='prior_location identifier id'>prior_location</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
            <span class='prior_operation identifier id'>prior_operation</span><span class='dot token'>.</span><span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='text identifier id'>text</span> <span class='lshft op'>&lt;&lt;</span> <span class='prior_operation identifier id'>prior_operation</span><span class='dot token'>.</span><span class='text identifier id'>text</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
            <span class='operation identifier id'>operation</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
            <span class='break break kw'>break</span><span class='lparen token'>(</span> <span class='false false kw'>false</span> <span class='rparen token'>)</span>
          <span class='elsif elsif kw'>elsif</span> <span class='prior_location identifier id'>prior_location</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span> <span class='location identifier id'>location</span> <span class='rparen token'>)</span>
            <span class='conflict! fid id'>conflict!</span><span class='lparen token'>(</span> <span class='operation identifier id'>operation</span><span class='comma token'>,</span> <span class='prior_operation identifier id'>prior_operation</span> <span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
    <span class='end end kw'>end</span>
    
    <span class='reduced identifier id'>reduced</span><span class='dot token'>.</span><span class='unshift identifier id'>unshift</span><span class='lparen token'>(</span> <span class='operation identifier id'>operation</span> <span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='operation identifier id'>operation</span>
  <span class='end end kw'>end</span>
  
  <span class='@operations ivar id'>@operations</span><span class='dot token'>.</span><span class='replace identifier id'>replace</span><span class='lparen token'>(</span> <span class='reduced identifier id'>reduced</span> <span class='rparen token'>)</span>
  
  <span class='@operations ivar id'>@operations</span><span class='dot token'>.</span><span class='inject identifier id'>inject</span><span class='lparen token'>(</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='map identifier id'>map</span><span class='comma token'>,</span> <span class='operation identifier id'>operation</span><span class='bitor op'>|</span>
    <span class='other_operaiton identifier id'>other_operaiton</span> <span class='assign token'>=</span> <span class='map identifier id'>map</span><span class='lbrack token'>[</span> <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='index identifier id'>index</span> <span class='rbrack token'>]</span> <span class='and and kw'>and</span>
      <span class='ANTLR3 constant id'>ANTLR3</span><span class='dot token'>.</span><span class='bug! fid id'>bug!</span><span class='lparen token'>(</span> <span class='Util constant id'>Util</span><span class='dot token'>.</span><span class='tidy identifier id'>tidy</span><span class='lparen token'>(</span> <span class='string val'>&quot;| %s#reduce! should have left only one operation per index,\n| but %p conflicts with %p\n&quot;</span> <span class='rparen token'>)</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='comma token'>,</span> <span class='operation identifier id'>operation</span><span class='comma token'>,</span> <span class='other_operaiton identifier id'>other_operaiton</span> <span class='rbrack token'>]</span> <span class='rparen token'>)</span>
    <span class='map identifier id'>map</span><span class='lbrack token'>[</span> <span class='operation identifier id'>operation</span><span class='dot token'>.</span><span class='index identifier id'>index</span> <span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='operation identifier id'>operation</span>
    <span class='map identifier id'>map</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="replace-instance_method">
  
    - (<tt>Object</tt>) <strong>replace</strong>(*range_arguments) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 168</span>

<span class='def def kw'>def</span> <span class='replace identifier id'>replace</span><span class='lparen token'>(</span> <span class='mult op'>*</span><span class='range_arguments identifier id'>range_arguments</span> <span class='rparen token'>)</span>
  <span class='range identifier id'>range</span><span class='comma token'>,</span> <span class='text identifier id'>text</span> <span class='assign token'>=</span> <span class='cast_range identifier id'>cast_range</span><span class='lparen token'>(</span> <span class='range_arguments identifier id'>range_arguments</span><span class='comma token'>,</span> <span class='integer val'>1</span> <span class='rparen token'>)</span>
  
  <span class='op identifier id'>op</span> <span class='assign token'>=</span> <span class='Replace constant id'>Replace</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span> <span class='@stream ivar id'>@stream</span><span class='comma token'>,</span> <span class='range identifier id'>range</span><span class='comma token'>,</span> <span class='text identifier id'>text</span> <span class='rparen token'>)</span>
  <span class='@operations ivar id'>@operations</span> <span class='lshft op'>&lt;&lt;</span> <span class='op identifier id'>op</span>
  <span class='return return kw'>return</span> <span class='op identifier id'>op</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="undo-instance_method">
  
    - (<tt>Object</tt>) <strong>undo</strong>(number_of_operations = 1) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


298
299
300</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/antlr3/streams/rewrite.rb', line 298</span>

<span class='def def kw'>def</span> <span class='undo identifier id'>undo</span><span class='lparen token'>(</span> <span class='number_of_operations identifier id'>number_of_operations</span> <span class='assign token'>=</span> <span class='integer val'>1</span> <span class='rparen token'>)</span>
  <span class='@operations ivar id'>@operations</span><span class='dot token'>.</span><span class='pop identifier id'>pop</span><span class='lparen token'>(</span> <span class='number_of_operations identifier id'>number_of_operations</span> <span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Apr 26 03:51:21 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.4 (ruby-1.8.7).
</div>

  </body>
</html>